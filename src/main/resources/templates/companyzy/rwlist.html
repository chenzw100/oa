
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>公司人才任务信息</title>
    <link rel="stylesheet" type="text/css" href="../css/demo.css">
    <link rel="stylesheet" type="text/css" href="../themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="../themes/icon.css">
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../js/jquery.edatagrid.js"></script>
</head>
<body>
<div style="background:#fafafa;padding:5px;width:600px;border:1px solid #ccc">
    <a href="#" class="easyui-menubutton" menu="#mm1" iconCls="icon-edit">人才资源菜单</a>
    <a href="#" class="easyui-menubutton" menu="#mm2" iconCls="icon-edit">公司资源菜单</a>
</div>
<div id="mm1" style="width:150px;">
    <a href="/mg/rw.html" class="easyui-linkbutton" plain="true" >分配人才任务</a>
    <a href="/mg/mglist.html" class="easyui-linkbutton" plain="true" >人才资源管理</a>
    <a href="/user/list.html" class="easyui-linkbutton" plain="true" >员工管理</a>
    <a href="/user/password.html" class="easyui-linkbutton" plain="true" >密码管理</a>
    <a href="/import" class="easyui-linkbutton" plain="true" >导入人才数据</a>
    <a href="/loginout" class="easyui-linkbutton" plain="true" >退出系统</a>
</div>
<div id="mm2" style="width:150px;">
    <a href="/companyzy/rw.html" class="easyui-linkbutton" plain="true" >分配公司任务</a>
    <a href="/companyzy/list.html" class="easyui-linkbutton" plain="true" >公司资源管理</a>
    <a href="/company/list.html" class="easyui-linkbutton" plain="true" >资质公司数据</a>
    <a href="/companyzy/import" class="easyui-linkbutton" plain="true" >导入公司数据</a>
</div>
<h2>公司信息 --- 分配任务</h2>
<div>
<div>
    <div style="padding:5px 0;">
        <span>未被分配:</span>
        <select class="easyui-combobox" id="fen" name="fen" style="width:70px;">
            <option value="是">是</option>
            <option value="否">否</option>
        </select>
        专业:<input class="easyui-textbox" type="text"  name="zy" id="zy" >
        &nbsp;<a href="#" id="query" class="easyui-linkbutton" data-options="iconCls:'icon-search'" style="width:80px">查询</a>
        <a href="#" class="easyui-linkbutton" onclick="getSelections()">任务分配</a>
    </div>

</div>

<table id="dg" title="人才库" class="easyui-datagrid"  style="width:700px;height:250px"
       toolbar="#toolbar" pagination="true" idField="id"
       rownumbers="true" fitColumns="true"  selectOnCheck="true" singleSelect="false">
    <thead>
    <tr>
        <th data-options="field:'ck',checkbox:true"></th>
        <th data-options="field:'name',align:'center'">姓名</th>
        <th data-options="field:'phoneOne',align:'center'">电话</th>
        <th data-options="field:'zy',align:'center'">专业</th>
        <th data-options="field:'optName',align:'center'">执行人员</th>
        <th data-options="field:'customerYx',align:'center'">意向</th>
        <th data-options="field:'customerWx',align:'center'">微信</th>
        <th data-options="field:'customerZf',align:'center'">作废号码</th>
        <th data-options="field:'infoDesc',align:'center',width:50">描述</th>
        <th data-options="field:'modified',align:'center'">最后操作时间</th>
    </tr>
    </thead>
</table>
<div style="margin:10px 0;">

</div>

    <input type="hidden" name="ids" id="ids">

    <div id="win" class="easyui-window" data-options="title:'Inline Window',inline:true" style="width:400px;height:350px">

    </div>
</div>

<script type="text/javascript">
    $(function(){
        $('#dg').edatagrid({
            pageSize:100,
            pageList:[100,500,1000,1500],
            url:'/companyzy/fenpei.action',
            saveUrl: '/companyzy/updates.action',
            updateUrl: '/companyzy/update.action',
            destroyUrl: '/companyzy/del.action'
        });
        $('#dd').dialog('close');
        $('#win').window('close');
    });
    $("#query").click(function () {
        $('#dg').datagrid('load', {
            fen: $("#fen").val(),
            zy:$("#zy").val()
        });
    })

    function getSelected(){
        var row = $('#dg').datagrid('getSelected');
        if (row){
            $.messager.alert('Info', row.itemid+":"+row.productid+":"+row.attr1);
        }
    }
    function getSelections(){
        var ss = [];
        var rows = $('#dg').datagrid('getSelections');
        if(rows.length==0){
            $.messager.alert('Info', "请选择任务，再进行分配");
            return;
        }
        for(var i=0; i<rows.length; i++){
            var row = rows[i];
            ss.push(row.id);
        }
        $("#ids").val(ss);
        debugger;
        $('#win').window('open');
        $('#win').window('refresh', '/user/ckcompany.html');
    }

</script>

</body>
</html>